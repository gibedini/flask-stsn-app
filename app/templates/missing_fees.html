{% extends "base.html" %}
{% block title %}Subscription messages{% endblock %}
{% block content %}
<h2>Subscription messages</h2>
<p class="mb-3">
Subscription messages are automatically generated based on last
subscription fee payment. Four types of 
messages are output depending on the outstanding fees:
</p>
<div class="narrow-table-left">
<ol class="list-group list-group-numbered">
<li class="list-group-item">no outstanding fee (based on template "regolari");</li>
<li class="list-group-item">one outstanding fee (based on template "morosi_one");</li>
<li class="list-group-item">two outstanding fees (based on template "morosi_plus");</li>
<li class="list-group-item"	>three or more outstanding fees (based on template "decaduti").</li>
</ol>
</div>
<p class="mt-3">
You may change template by clicking on "Templates" link in the navbar.<br>
You may download a CSV file for mailmerge by pressing the green "Download CSV" button below.
</p>
{% if messages %}
<a href="{{ url_for('export_missing_fees') }}" class="btn btn-success mb-3">
  Download CSV
</a>
  <ul class="list-group">
    {% for email, message in messages %}
    <li class="list-group-item">
      <strong>{{ email }}</strong><br>
      <pre>{{ message }}</pre>
    </li>
    {% endfor %}
  </ul>
{% else %}
  <p>Tutti i soci sono in regola.</p>
{% endif %}
{% endblock %}
